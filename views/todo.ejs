<!DOCTYPE html>
<html lang="en">
 <head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <script src="https://cdn.tailwindcss.com"></script>
   <title>Index page</title>
   <link rel="stylesheet" href="/css/styles.css" />
   <style>
    .od{
      display: flex;
      justify-content: space-around;
    }
    .od1{
      display: flex;
      /* justify-content: space-between; */
      justify-content: space-around;
      
      padding-right: 350px;
    }
    
    #addedtasks{
            /* display: grid; */
            /* align-items: center;
            justify-content: center; */
            /* flex-direction: column; */
            width:90%;
            color: black; 
            background-color: #C1E3FF;
    }
    .tasks{
          color: black;
          width:100%; 
          height:5%;
          display: grid;
          justify-items: center;
          word-break: keep-all;
          grid-template-columns: 1fr 1fr 1fr;
          border:solid 1px black;
          padding-top: 10px;
          padding-bottom: 10px;
          align-items: center;
          /* padding-left: 20px;
          padding-right: 20px; */
          flex-direction: row;
          justify-content: space-evenly;
        }
        body{
          /* background-color: navy;
          color: white; */
          font-family: sans-serif;
          background-color: navy;
          color: white;
          padding: 4%;
          /* background: #FFFFFF; */
        }
        .Todo-Item:hover .trash-icon{
          background-color: navy;
          display: block;
        }
        .ttt{
          background-color: #C1E3FF;
        }
    
 </style>
 <script>
    function updateTodo(id){
      fetch(`/todos/${id}/markAsCompleted`,{
        method:"put",
        headers:{"Content-Type":"application/json"},
      })
      .then((res)=>{
        if(res.ok){
          window.location.reload();
        }
      })
      .catch((err)=>console.error(err));
    }
    function deleteTodo(id){
      fetch(`/todos/${id}/`,{
        method:"delete",
        headers:{"Content-Type":"application/json"},
      })
      .then((res)=>{
        if(res.ok){
          window.location.reload();
        }
      })
      .catch((err)=>console.error(err));
    }
 </script>
 </head>
 <body>
   <!-- <h1>This is index page!</h1>
   <form action="/" method="get">
    <h1>This is index page!</h1> -->

   <!-- </form> -->
   
    <!-- <h1>OverDue : </h1>
    <table align="center">
      <tr >
        <td><b>Title</b></td>
          
        <td><b>DueDate</b></td>
        
        <td><b>Completed Status</b></td>
      </tr>
      <% for(var i=0;i< todocom.length;i++){ %>
        <tr >
          <td><%=todocom[i].title%></td>
          <td><%=todocom[i].dueDate%></td>
          <td><%=todocom[i].completed %></td>
        </tr>
      <% } %>
    </table> -->
    <div class="grid grid-cols-6">
      <div class="col-start-3 col-span-2">
        <h1 class="text-2xl font-semibold text-white-600">
          My Todo-list
        </h1>
      </div>
    </div>

    <form action="/todos" method="post">
      <div class="flex gap-2 py-4">
        <div class="flex-auto w-64">
          <input type="text" name="title" class="border border-gray-300 text-gray-900 text-sm rounded w-full p-2" placeholder="What's next?" autofocus required>
        </div>
        <div class="flex-auto w-32">
          <input type="date" name="dueDate" class="border border-gray-300 text-gray-900 text-sm rounded w-full p-2 leading-4	">
        </div>
        <div class="flex-none">
          <button type="submit" class="text-white bg-green-600 hover:bg-green-700 font-medium rounded text-sm px-5 py-2 mr-2 mb-2">Add</button>
        </div>            
      </div>
    </form>
    <div class="mt-2">
      <h5>Over Due : </h5>
      <ul class="list-none pl-4 ttt">
        <% for(var i=0;i< todocom.length;i++){ %>
        <li class="Todo-Item">
          <div class="flex items-center w-fit my-2 px-2 py-1 rounded hover:bg-purple-50">
            <input id="todo-checkbox-<%=todocom[i].id %>" type="checkbox" <%=todocom[i].completed ? "checked":"" %> value="" onclick="updateTodo(<%=todocom[i].id %>)" class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300">
            <label for="todo-checkbox-<%=todocom[i].id %>" class="ml-2 text-sm text-gray-600 cursor-pointer"><%=todocom[i].title%></label>
            &nbsp;&nbsp;<a class="hidden trash-icon" href="#!" onclick="deleteTodo(<%=todocom[i].id%>)" >
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
              </svg>
            </a>
          </div>              
        </li>
        <% } %>

      </ul>

      <br><br>

      <h5>Due Today : </h5>
      <ul class="list-none pl-4 ttt">
        <% for(var i=0;i< todotod.length;i++){ %>
        <li class="Todo-Item">
          <div class="flex items-center w-fit my-2 px-2 py-1 rounded hover:bg-purple-50">
            <input id="todo-checkbox-<%=todotod[i].id %>" type="checkbox" <%=todotod[i].completed ? "checked":"" %> value="" onclick="updateTodo(<%=todotod[i].id %>)" class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300">
            <label for="todo-checkbox-<%=todotod[i].id %>" class="ml-2 text-sm text-gray-600 cursor-pointer"><%=todotod[i].title%></label>
            &nbsp;&nbsp;<a class="hidden trash-icon" href="#!" onclick="deleteTodo(<%=todotod[i].id%>)">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
              </svg>
            </a>
          </div>              
        </li>
        <% } %>

      </ul>
      <br><br>


      <h5>Due Later : </h5>
      <ul class="list-none pl-4 ttt">
        <% for(var i=0;i< todonot.length;i++){ %>
        <li class="Todo-Item">
          <div class="flex items-center w-fit my-2 px-2 py-1 rounded hover:bg-purple-50">
            <input id="todo-checkbox-<%=todonot[i].id %>" type="checkbox" <%=todonot[i].completed ? "checked":"" %> value="" onclick="updateTodo(<%=todonot[i].id %>)" class="w-4 h-4 text-blue-600 bg-gray-100 rounded border-gray-300">
            <label for="todo-checkbox-<%=todonot[i].id %>" class="ml-2 text-sm text-gray-600 cursor-pointer"><%=todonot[i].title%></label>
            &nbsp;&nbsp;<a class="hidden trash-icon" href="#!" onclick="deleteTodo(<%=todonot[i].id%>)">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
              </svg>
            </a>
          </div>              
        </li>
        <% } %>
      </ul>
    </div>
 </body>
</html>